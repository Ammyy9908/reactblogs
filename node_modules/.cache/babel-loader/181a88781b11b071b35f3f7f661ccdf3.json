{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sumitkumar/Desktop/React/blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sumitkumar/Desktop/React/blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sumitkumar/Desktop/React/blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/sumitkumar/Desktop/React/blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useState,useEffect}from\"react\";import{Route,Redirect}from\"react-router-dom\";import axios from\"axios\";import UserPost from\"./UserPost\";var ProtectedRoute=function ProtectedRoute(_ref){var Component=_ref.component,rest=_objectWithoutProperties(_ref,[\"component\"]);function UpdateProfile(){var name=document.querySelector('.name').textContent;var uid=JSON.parse(localStorage.getItem('userData'))['uid'];axios.post(\"https://desolate-reaches-85560.herokuapp.com/profile/update/uid/\".concat(uid),{name:name,id:uid}).then(function(response){var userData=response.data.data.userData;localStorage.setItem('userData',JSON.stringify(userData));return/*#__PURE__*/React.createElement(Route,null,/*#__PURE__*/React.createElement(Redirect,{to:\"/profile\"}));}).catch(function(error){console.log(error);});}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios(\"https://desolate-reaches-85560.herokuapp.com/userpost/uid/\".concat(JSON.parse(localStorage.getItem('userData'))['uid']));case 2:result=_context.sent;setData(result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/React.createElement(Route,Object.assign({},rest,{render:function render(props){if(localStorage.getItem('userData')){return/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-1\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://avatars.dicebear.com/api/initials/\"+JSON.parse(localStorage.getItem('userData'))['name']+\".svg\",alt:\"avatar\",className:\"rounded-circle img-fluid\",width:\"75\",height:\"75\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-6\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-muted display-4 name\",contentEditable:\"true\",suppressContentEditableWarning:true},JSON.parse(localStorage.getItem('userData'))['name']))),/*#__PURE__*/React.createElement(\"p\",{className:\"text-muted\"},JSON.parse(localStorage.getItem('userData'))['uemail']),/*#__PURE__*/React.createElement(\"p\",{className:\"text-muted\"},\"Last updated \",new Date(JSON.parse(localStorage.getItem('userData'))['lastupdated']).toLocaleString()),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){localStorage.clear();props.history.push('/reactblog/login');window.location.reload(false);}},\"Logout\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary ml-4\",onClick:UpdateProfile},\"Edit Name\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h1\",{className:\"display-6 mt-4\"},\"Your Posts\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-12\"},data.map(function(post){return/*#__PURE__*/React.createElement(UserPost,{key:post._id,id:post._id,title:post.title,content:post.content,pubAt:post.createdAt,likes:post.likes,tags:post.tags,postBy:post.publishedBy});}))));}else{return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/login\",state:{from:props.location}}});}}}));};export default ProtectedRoute;","map":{"version":3,"sources":["/Users/sumitkumar/Desktop/React/blog/client/src/components/Profile.jsx"],"names":["React","useState","useEffect","Route","Redirect","axios","UserPost","ProtectedRoute","Component","component","rest","UpdateProfile","name","document","querySelector","textContent","uid","JSON","parse","localStorage","getItem","post","id","then","response","userData","data","setItem","stringify","catch","error","console","log","setData","fetchData","result","props","Date","toLocaleString","clear","history","push","window","location","reload","map","_id","title","content","createdAt","likes","tags","publishedBy","pathname","state","from"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport {Route, Redirect} from \"react-router-dom\";\nimport axios from \"axios\";\nimport UserPost from \"./UserPost\";\n\n\n\nconst ProtectedRoute = ({\n    component: Component,\n    ...rest\n  }) => {\n    function UpdateProfile(){\n          const name = document.querySelector('.name').textContent;\n          const uid = JSON.parse(localStorage.getItem('userData'))['uid'];\n          axios.post(`https://desolate-reaches-85560.herokuapp.com/profile/update/uid/${uid}`,{name:name,id:uid}).then((response)=>{\n  \n            const userData=response.data.data.userData;\n            localStorage.setItem('userData', JSON.stringify(userData));\n           return <Route><Redirect to=\"/profile\"></Redirect></Route>\n          }).catch((error)=>{\n            console.log(error);\n          })\n}\n\n   \n    const [data,setData] = useState([]);\n    useEffect(() => {\n      const fetchData = async () => {\n        const result = await axios(\n          `https://desolate-reaches-85560.herokuapp.com/userpost/uid/${JSON.parse(localStorage.getItem('userData'))['uid']}`,\n        );\n   \n        setData(result.data);\n      };\n   \n      fetchData();\n    }, []);\n    return (\n      <Route\n        {...rest}\n\n\n      \n\n        \n        render={props => {\n          if (localStorage.getItem('userData')) {\n            return <div className=\"container mt-5\">\n            <div className=\"row\">\n              <div className=\"col-lg-1\">\n              <img src={\"https://avatars.dicebear.com/api/initials/\"+JSON.parse(localStorage.getItem('userData'))['name']+\".svg\"} alt=\"avatar\" className=\"rounded-circle img-fluid\" width=\"75\" height=\"75\"/>\n              </div>\n              <div className=\"col-lg-6\">\n              <p className=\"text-muted display-4 name\" contentEditable=\"true\" suppressContentEditableWarning={true}>{JSON.parse(localStorage.getItem('userData'))['name']}</p>\n              </div>\n            </div>\n           \n            \n            <p className=\"text-muted\">{JSON.parse(localStorage.getItem('userData'))['uemail']}</p>\n            <p className=\"text-muted\">Last updated {new Date(JSON.parse(localStorage.getItem('userData'))['lastupdated']).toLocaleString()}</p>\n            \n            <button className=\"btn btn-danger\"\n        onClick={() => {\n          localStorage.clear();\n          props.history.push('/reactblog/login');\n          window.location.reload(false);\n        }}\n      >\n        Logout\n      </button>\n        <button className=\"btn btn-primary ml-4\" onClick={UpdateProfile}>Edit Name</button>\n        <br/>\n        <h1 className=\"display-6 mt-4\">Your Posts</h1>\n        <div className=\"row\">\n          <div className=\"col-lg-12\">\n            \n          {data.map((post) => (\n        <UserPost key={post._id}\n                  id = {post._id}\n                  title={post.title}\n                  content = {post.content}\n                  pubAt = {post.createdAt}\n                  likes = {post.likes}\n                  tags = {post.tags}\n                  postBy = {post.publishedBy}/>\n          ))}\n            \n          </div>\n        </div>\n      </div>;\n          } else {\n            return (\n              <Redirect\n                to={{\n                  pathname: \"/login\",\n                  state: {\n                    from: props.location\n                  }\n                }}\n              />\n            );\n          }\n        }}\n      />\n      \n    );\n  };\n  \n\nexport default ProtectedRoute;"]},"metadata":{},"sourceType":"module"}