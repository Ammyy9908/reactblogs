{"ast":null,"code":"var _jsxFileName = \"/Users/sumitkumar/Desktop/React/blog/client/src/components/Profile.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport UserPost from \"./UserPost\";\n\nconst ProtectedRoute = ({\n  component: Component,\n  ...rest\n}) => {\n  function UpdateProfile() {\n    const name = document.querySelector('.name').textContent;\n    const uid = JSON.parse(localStorage.getItem('userData'))['uid'];\n    axios.post(`https://desolate-reaches-85560.herokuapp.com/profile/update/uid/${uid}`, {\n      name: name,\n      id: uid\n    }).then(response => {\n      const userData = response.data.data.userData;\n      localStorage.setItem('userData', JSON.stringify(userData));\n      return /*#__PURE__*/React.createElement(Route, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 26\n        }\n      }));\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await axios(`https://desolate-reaches-85560.herokuapp.com/userpost/uid/${JSON.parse(localStorage.getItem('userData'))['uid']}`);\n      setData(result.data);\n    };\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: props => {\n      if (localStorage.getItem('userData')) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container mt-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-lg-1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"https://avatars.dicebear.com/api/initials/\" + JSON.parse(localStorage.getItem('userData'))['name'] + \".svg\",\n          alt: \"avatar\",\n          className: \"rounded-circle img-fluid\",\n          width: \"75\",\n          height: \"75\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-lg-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-muted display-4 name\",\n          contentEditable: \"true\",\n          suppressContentEditableWarning: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }\n        }, JSON.parse(localStorage.getItem('userData'))['name']))), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-muted\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }\n        }, JSON.parse(localStorage.getItem('userData'))['uemail']), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-muted\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }\n        }, \"Last updated \", new Date(JSON.parse(localStorage.getItem('userData'))['lastupdated']).toLocaleString()), /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: () => {\n            localStorage.clear();\n            props.history.push('https://ammyy9908.github.io/reactblog/login');\n            window.location.reload(false);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }\n        }, \"Logout\"), /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-primary ml-4\",\n          onClick: UpdateProfile,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 9\n          }\n        }, \"Edit Name\"), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 9\n          }\n        }), /*#__PURE__*/React.createElement(\"h1\", {\n          className: \"display-6 mt-4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 9\n          }\n        }, \"Your Posts\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-lg-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }\n        }, data.map(post => /*#__PURE__*/React.createElement(UserPost, {\n          key: post._id,\n          id: post._id,\n          title: post.title,\n          content: post.content,\n          pubAt: post.createdAt,\n          likes: post.likes,\n          tags: post.tags,\n          postBy: post.publishedBy,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 9\n          }\n        })))));\n      } else {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: \"https://ammyy9908.github.io/reactblog/login\",\n            state: {\n              from: props.location\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default ProtectedRoute;","map":{"version":3,"sources":["/Users/sumitkumar/Desktop/React/blog/client/src/components/Profile.jsx"],"names":["React","useState","useEffect","Route","Redirect","axios","UserPost","ProtectedRoute","component","Component","rest","UpdateProfile","name","document","querySelector","textContent","uid","JSON","parse","localStorage","getItem","post","id","then","response","userData","data","setItem","stringify","catch","error","console","log","setData","fetchData","result","props","Date","toLocaleString","clear","history","push","window","location","reload","map","_id","title","content","createdAt","likes","tags","publishedBy","pathname","state","from"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport {Route, Redirect} from \"react-router-dom\";\nimport axios from \"axios\";\nimport UserPost from \"./UserPost\";\n\n\n\nconst ProtectedRoute = ({\n    component: Component,\n    ...rest\n  }) => {\n    function UpdateProfile(){\n          const name = document.querySelector('.name').textContent;\n          const uid = JSON.parse(localStorage.getItem('userData'))['uid'];\n          axios.post(`https://desolate-reaches-85560.herokuapp.com/profile/update/uid/${uid}`,{name:name,id:uid}).then((response)=>{\n  \n            const userData=response.data.data.userData;\n            localStorage.setItem('userData', JSON.stringify(userData));\n           return <Route><Redirect to=\"/profile\"></Redirect></Route>\n          }).catch((error)=>{\n            console.log(error);\n          })\n}\n\n   \n    const [data,setData] = useState([]);\n    useEffect(() => {\n      const fetchData = async () => {\n        const result = await axios(\n          `https://desolate-reaches-85560.herokuapp.com/userpost/uid/${JSON.parse(localStorage.getItem('userData'))['uid']}`,\n        );\n   \n        setData(result.data);\n      };\n   \n      fetchData();\n    }, []);\n    return (\n      <Route\n        {...rest}\n\n\n      \n\n        \n        render={props => {\n          if (localStorage.getItem('userData')) {\n            return <div className=\"container mt-5\">\n            <div className=\"row\">\n              <div className=\"col-lg-1\">\n              <img src={\"https://avatars.dicebear.com/api/initials/\"+JSON.parse(localStorage.getItem('userData'))['name']+\".svg\"} alt=\"avatar\" className=\"rounded-circle img-fluid\" width=\"75\" height=\"75\"/>\n              </div>\n              <div className=\"col-lg-6\">\n              <p className=\"text-muted display-4 name\" contentEditable=\"true\" suppressContentEditableWarning={true}>{JSON.parse(localStorage.getItem('userData'))['name']}</p>\n              </div>\n            </div>\n           \n            \n            <p className=\"text-muted\">{JSON.parse(localStorage.getItem('userData'))['uemail']}</p>\n            <p className=\"text-muted\">Last updated {new Date(JSON.parse(localStorage.getItem('userData'))['lastupdated']).toLocaleString()}</p>\n            \n            <button className=\"btn btn-danger\"\n        onClick={() => {\n          localStorage.clear();\n          props.history.push('https://ammyy9908.github.io/reactblog/login');\n          window.location.reload(false);\n        }}\n      >\n        Logout\n      </button>\n        <button className=\"btn btn-primary ml-4\" onClick={UpdateProfile}>Edit Name</button>\n        <br/>\n        <h1 className=\"display-6 mt-4\">Your Posts</h1>\n        <div className=\"row\">\n          <div className=\"col-lg-12\">\n            \n          {data.map((post) => (\n        <UserPost key={post._id}\n                  id = {post._id}\n                  title={post.title}\n                  content = {post.content}\n                  pubAt = {post.createdAt}\n                  likes = {post.likes}\n                  tags = {post.tags}\n                  postBy = {post.publishedBy}/>\n          ))}\n            \n          </div>\n        </div>\n      </div>;\n          } else {\n            return (\n              <Redirect\n                to={{\n                  pathname: \"https://ammyy9908.github.io/reactblog/login\",\n                  state: {\n                    from: props.location\n                  }\n                }}\n              />\n            );\n          }\n        }}\n      />\n      \n    );\n  };\n  \n\nexport default ProtectedRoute;"]},"metadata":{},"sourceType":"module"}